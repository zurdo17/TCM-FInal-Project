import time
import random
import csv
import pandas as pd


csv_file = "question_data.csv"
df = pd.read_csv(csv_file, names=["College", "Question"])
modified_df = df.dropna()
df_question = modified_df.groupby("College")["Question"]


def Startup():
    print()
    print("Welcome to the Medical School Interview Preparation Tool")
    print()
    time.sleep(3)
    print("You will now be presented with a list of all medical schools in the SDN database.")
    print()
    time.sleep(4)
    print("After selecting a medical school, copy and paste the name the name of the school into the command line.")
    print()
    time.sleep(4)
    x = input("Would you like to proceed with the school selection process? (yes/no): ")
    if x == "yes":
        return None
    if x == "no":
        exitProgram()
        quit()


def searchSchool():
    with open("school_names.csv") as f:
        reader = csv.reader(f)
        for row in reader:
            print(row[0])
            time.sleep(0.01)
    print()


def generateRandomQuestion(df, college):
    return random.choice(df[df['College'] == college]['Question'].values)


def exitProgram():
    print()
    print()
    time.sleep(0.5)
    print("Thank you for using the Medical School Interview Preparation Tool")
    time.sleep(0.5)

##################### MAIN PROGRAM #####################

Startup()
time.sleep(1)

search_new_school = "yes"
while search_new_school == "yes":

    searchSchool()

    school_selection = input('Please enter a medical school from the list above: ')

    continue_prep = "yes"
    while continue_prep == "yes":
        print()
        time.sleep(1)
        print(f"Generating random interview question from {school_selection!r}")
        print()
        time.sleep(1)
        print("...")
        time.sleep(1)
        print()
        random_question = generateRandomQuestion(modified_df, school_selection)
        print(random_question)
        print()
        time.sleep(1.5)
        continue_prep = input("Would you like another question? (yes/no): ")

    print()
    search_new_school = input("Would you like to search questions from another school? (yes/no): ")

exitProgram()
